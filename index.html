<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Abrox ‚Äì Profit Hunters Chat</title>

  <!-- External CSS -->
  <link rel="stylesheet" href="widget.css" />

  <style>
    :root{
      --tg-header-height: 56px;
      --tg-avatar-size: 36px;
      --tg-title-size: 17px; /* FIXED: Telegram accurate */
      --tg-meta-size: 13px;
      --tg-input-height: 40px;
      --tg-input-radius: 20px;
      --tg-send-size: 36px;
      --tg-icon-size: 24px; /* FIXED: Telegram icon size */
      --tg-gap: 10px;
    }

    html,body {
      height:100%;
      margin:0;
    }

    /* Main App Container */
    #tg-comments-app {
      display:flex;
      flex-direction:column;
      height:100dvh; /* FIXED: dynamic viewport */
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
    }

    /* ================= HEADER ================= */

    .tg-header {
      height: var(--tg-header-height);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 12px;
      border-bottom:1px solid rgba(255,255,255,0.05);
      position:sticky;
      top:0;
      z-index:30;
    }

    .tg-back-btn,
    .tg-options-btn {
      width:40px;
      height:40px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:none;
      border:none;
      cursor:pointer;
      font-size:var(--tg-icon-size);
    }

    .tg-header-center {
      display:flex;
      align-items:center;
      gap:var(--tg-gap);
      flex:1;
      margin:0 10px;
      min-width:0;
    }

    .tg-header-avatar {
      width:var(--tg-avatar-size);
      height:var(--tg-avatar-size);
      border-radius:50%;
      object-fit:cover;
      flex-shrink:0;
    }

    .tg-header-info {
      display:flex;
      flex-direction:column;
      justify-content:center;
      min-width:0;
    }

    .tg-title {
      font-size:var(--tg-title-size);
      font-weight:600;
      line-height:1.2;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* ‚úÖ FIXED: Combined Telegram meta line */
    .tg-meta {
      font-size:var(--tg-meta-size);
      font-weight:400;
      line-height:1.2;
      margin-top:2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* ================= PIN ================= */

    .tg-pin-banner {
      display:flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      font-size:13px;
      box-sizing:border-box;
    }

    .hidden {
      display:none !important;
    }

    /* ================= COMMENTS ================= */

    .tg-comments-container {
      flex:1 1 auto;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      padding:12px 0;
      box-sizing:border-box;
    }

    /* Stable bottom spacer */
    .tg-comments-container::after {
      content:"";
      display:block;
      height:80px;
    }

    /* Jump indicator */
    #tg-jump-indicator {
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:110px;
      padding:6px 12px;
      border-radius:18px;
      font-size:13px;
      display:flex;
      gap:8px;
      align-items:center;
      box-shadow:0 6px 18px rgba(0,0,0,.25);
      z-index:999;
      cursor:pointer;
    }

    #tg-jump-indicator.hidden {
      display:none;
    }

    /* ================= INPUT ================= */

    .tg-input-wrapper {
      flex-shrink:0;
      padding:8px 12px;
      border-top:1px solid rgba(255,255,255,0.05);
      box-sizing:border-box;
    }

    .tg-input-bar {
      display:flex;
      align-items:center;
      gap:8px;
    }

    .tg-icon-btn {
      background:none;
      border:none;
      padding:6px;
      cursor:pointer;
      width:36px;
      height:36px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:var(--tg-icon-size);
    }

    .tg-comment-input {
      flex:1;
      height:var(--tg-input-height);
      border-radius:var(--tg-input-radius);
      padding:8px 12px;
      font-size:15px;
      outline:none;
      border:none;
    }

    .tg-send-btn {
      width:var(--tg-send-size);
      height:var(--tg-send-size);
      border-radius:50%;
      border:none;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }
  </style>
</head>
<body>

<div id="tg-comments-app">

  <header class="tg-header">
    <button class="tg-back-btn">
      <i data-lucide="arrow-left"></i>
    </button>

    <div class="tg-header-center">
      <img src="assets/logo.jpg" class="tg-header-avatar" />

      <div class="tg-header-info">
        <div class="tg-title">üåê Profit Hunters Chat</div>

        <!-- ‚úÖ Single Telegram-style meta line -->
        <div class="tg-meta" id="tg-meta-line">
          1,284 members, 128 online
        </div>
      </div>
    </div>

    <button class="tg-options-btn">
      <i data-lucide="more-vertical"></i>
    </button>
  </header>

  <!-- PIN (Modular ‚Äî Controlled by JS Only) -->
  <div id="tg-pin-banner" class="tg-pin-banner hidden"></div>

  <div id="tg-post-preview" class="tg-post-preview"></div>

  <main id="tg-comments-container" class="tg-comments-container"></main>

  <div id="tg-jump-indicator" class="hidden">
    <i data-lucide="arrow-down"></i>
    <span>New messages</span>
  </div>

  <!-- INPUT -->
  <div class="tg-input-wrapper">
    <div class="tg-input-bar">

      <button id="tg-emoji-btn" class="tg-icon-btn">
        <i data-lucide="smile"></i>
      </button>

      <input
        type="text"
        id="tg-comment-input"
        class="tg-comment-input"
        placeholder="Message‚Ä¶"
        autocomplete="off"
      />

      <button id="tg-camera-btn" class="tg-icon-btn">
        <i data-lucide="camera"></i>
      </button>

      <button id="tg-send-btn" class="tg-send-btn hidden">
        <i data-lucide="send"></i>
      </button>

    </div>
  </div>

</div>

<script src="https://unpkg.com/lucide@latest"></script>
<script>lucide.createIcons();</script>

<script src="identity-personas.js"></script>
<script src="bubble-renderer.js"></script>
<script src="realism-engine-v11.js"></script>
<script src="interactions.js"></script>
<script src="app.js"></script>

</body>
</html>
